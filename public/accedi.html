<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accedi - eCommerce</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

    <nav class="navbar navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="index.html">eCommerce</a>
        </div>
    </nav>

    <div class="container mt-5">
        <h2 class="text-center">Accedi</h2>
        <form id="loginForm" class="text-center">
            <input type="email" id="loginEmail" class="form-control mb-3" placeholder="Email" required>
            <input type="password" id="loginPassword" class="form-control mb-3" placeholder="Password" required>
            <button type="submit" class="btn btn-primary">Accedi</button>
        </form>

        <h2 class="text-center mt-5">Registrati</h2>
        <form id="registerForm" class="text-center">
            <input type="text" id="regNome" class="form-control mb-3" placeholder="Nome" required>
            <input type="email" id="regEmail" class="form-control mb-3" placeholder="Email" required>
            <input type="password" id="regPassword" class="form-control mb-3" placeholder="Password (min. 6 caratteri)" required>
            <input type="text" id="regDataNascita" class="form-control mb-3" placeholder="Data di Nascita (gg/mm/aaaa)" required>
            <input type="text" id="regCodiceFiscale" class="form-control mb-3" placeholder="Codice Fiscale" required>
            <button type="submit" class="btn btn-success">Registrati</button>
        </form>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // Imposta credenziali fisse
            const user = {
                nome: "Admin",
                email: "admin@example.com",
                password: "admin123",
                dataNascita: "01/01/1990",
                codiceFiscale: "ABCDEF12G34H567I"
            };
            localStorage.setItem("user", JSON.stringify(user));

            // Precompila i campi con le credenziali salvate
            document.getElementById("loginEmail").value = user.email;
            document.getElementById("loginPassword").value = user.password;

            // Gestione Login
            document.getElementById("loginForm").addEventListener("submit", function(event) {
                event.preventDefault();

                const email = document.getElementById("loginEmail").value.trim();
                const password = document.getElementById("loginPassword").value.trim();

                if (email === user.email && password === user.password) {
                    localStorage.setItem("isLoggedIn", "true");
                    window.location.href = "home_logged.html"; // Ora porta a home_logged.html
                } else {
                    alert("Credenziali errate!");
                }
            });

            // Registrazione Utente con memorizzazione dati
            document.getElementById("registerForm").addEventListener("submit", function(event) {
                event.preventDefault();

                const nome = document.getElementById("regNome").value.trim();
                const email = document.getElementById("regEmail").value.trim();
                const password = document.getElementById("regPassword").value.trim();
                const dataNascita = document.getElementById("regDataNascita").value.trim();
                const codiceFiscale = document.getElementById("regCodiceFiscale").value.trim();

                if (!nome || !email || !password || !dataNascita || !codiceFiscale) {
                    alert("Tutti i campi sono obbligatori!");
                    return;
                }

                const newUser = { nome, email, password, dataNascita, codiceFiscale };
                localStorage.setItem("user", JSON.stringify(newUser));
                alert("Registrazione avvenuta con successo! Ora puoi accedere.");
            });
        });
    </script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
